/// I2Cバス通信のトレイト
///
/// このトレイトは、I2Cバスを介したデバイスとの通信機能を提供します。
/// センサーやディスプレイなどのI2Cデバイスとの通信を抽象化し、
/// プラットフォーム非依存なコードを実現します。
pub trait I2cBus {
    /// I2C操作時のエラー型
    type Error;

    /// I2Cデバイスにデータを書き込みます。
    ///
    /// # 引数
    /// * `addr` - I2Cデバイスのアドレス（7ビット）
    /// * `bytes` - 書き込むデータ
    ///
    /// # エラー
    /// 通信エラーやデバイスが応答しない場合にエラーを返します。
    fn write(&mut self, addr: u8, bytes: &[u8]) -> Result<(), Self::Error>;

    /// I2Cデバイスからデータを読み取ります。
    ///
    /// # 引数
    /// * `addr` - I2Cデバイスのアドレス（7ビット）
    /// * `buffer` - 読み取ったデータを格納するバッファ
    ///
    /// # エラー
    /// 通信エラーやデバイスが応答しない場合にエラーを返します。
    fn read(&mut self, addr: u8, buffer: &mut [u8]) -> Result<(), Self::Error>;

    /// I2Cデバイスにデータを書き込んでから読み取ります（複合トランザクション）。
    ///
    /// レジスタアドレスを指定してからデータを読み取る場合など、
    /// 書き込みと読み取りを連続して行う必要がある場合に使用します。
    ///
    /// # 引数
    /// * `addr` - I2Cデバイスのアドレス（7ビット）
    /// * `bytes` - 書き込むデータ（通常はレジスタアドレス）
    /// * `buffer` - 読み取ったデータを格納するバッファ
    ///
    /// # エラー
    /// 通信エラーやデバイスが応答しない場合にエラーを返します。
    fn write_read(
        &mut self,
        addr: u8,
        bytes: &[u8],
        buffer: &mut [u8],
    ) -> Result<(), Self::Error>;
}

